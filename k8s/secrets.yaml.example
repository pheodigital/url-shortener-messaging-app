# ─── Secrets Template ─────────────────────────────────────
#
# IMPORTANT:
#   This file is a TEMPLATE — never commit real values to Git.
#   k8s/secrets.yaml is in .gitignore.
#
# How to use:
#   1. Copy this file:
#      cp k8s/secrets.yaml.example k8s/secrets.yaml
#   2. Replace every REPLACE_WITH_... value with your real value
#   3. Base64 encode each value:
#      echo -n "your-real-value" | base64
#   4. Paste the encoded result after the colon
#   5. Apply to cluster:
#      kubectl apply -f k8s/secrets.yaml

apiVersion: v1
kind: Secret
metadata:
  name: url-shortener-secrets
  namespace: url-shortener
type: Opaque

# ── All values must be base64 encoded ─────────────────────
# How to encode:
#   echo -n "your-value" | base64
#
# How to decode and verify:
#   echo "encodedvalue" | base64 --decode

data:

  # ── PostgreSQL (Neon) ────────────────────────────────────
  # Your full Neon connection string
  # Found at: neon.tech → your project → Connection Details
  # Example raw value: postgresql://alex:password@ep-cool-darkness.us-east-2.aws.neon.tech/neondb
  # echo -n "postgresql://username:password@host/dbname" | base64
  DATABASE_URL: REPLACE_WITH_BASE64_OF_YOUR_NEON_CONNECTION_STRING

  # ── Redis (Upstash) ──────────────────────────────────────
  # Your Upstash Redis connection string
  # Found at: console.upstash.com → your database → Connect → Node.js
  # Example raw value: redis://default:password@us1-glad-crab.upstash.io:6379
  # echo -n "redis://default:password@host:port" | base64
  REDIS_URL: REPLACE_WITH_BASE64_OF_YOUR_UPSTASH_REDIS_URL

  # ── RabbitMQ (CloudAMQP) ─────────────────────────────────
  # Your CloudAMQP AMQP URL
  # Found at: cloudamqp.com → your instance → AMQP details → URL
  # Example raw value: amqps://llxkzdci:password@dog.lmq.cloudamqp.com/llxkzdci
  # echo -n "amqps://user:password@host/vhost" | base64
  RABBITMQ_URL: REPLACE_WITH_BASE64_OF_YOUR_CLOUDAMQP_URL

  # ── MongoDB (Atlas) ──────────────────────────────────────
  # Your MongoDB Atlas connection string
  # Found at: mongodb.com/atlas → Connect → Drivers → Node.js
  # Example raw value: mongodb+srv://analytics:password@cluster0.abc123.mongodb.net/analytics
  # echo -n "mongodb+srv://user:password@cluster.mongodb.net/analytics" | base64
  MONGODB_URI: REPLACE_WITH_BASE64_OF_YOUR_MONGODB_ATLAS_URI

  # ── JWT Access Secret ────────────────────────────────────
  # Must be the same value across auth-service, url-service, analytics-service
  # Must be at least 32 characters
  # Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
  # echo -n "your-generated-secret" | base64
  JWT_ACCESS_SECRET: REPLACE_WITH_BASE64_OF_YOUR_JWT_ACCESS_SECRET

  # ── JWT Refresh Secret ───────────────────────────────────
  # Used only by auth-service
  # Must be different from JWT_ACCESS_SECRET
  # Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
  # echo -n "your-generated-secret" | base64
  JWT_REFRESH_SECRET: REPLACE_WITH_BASE64_OF_YOUR_JWT_REFRESH_SECRET

  # ── Google OAuth Client ID ───────────────────────────────
  # Found at: console.cloud.google.com → Credentials → your OAuth client
  # Example raw value: 123456789-abc.apps.googleusercontent.com
  # echo -n "your-client-id" | base64
  GOOGLE_CLIENT_ID: REPLACE_WITH_BASE64_OF_YOUR_GOOGLE_CLIENT_ID

  # ── Google OAuth Client Secret ───────────────────────────
  # Found at: console.cloud.google.com → Credentials → your OAuth client
  # echo -n "your-client-secret" | base64
  GOOGLE_CLIENT_SECRET: REPLACE_WITH_BASE64_OF_YOUR_GOOGLE_CLIENT_SECRET
